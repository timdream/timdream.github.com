"use strict";function ServiceWorkerController(){}if(document.documentElement.classList.remove("no-js"),"timdream.org"===window.location.hostname&&"1"!==window.doNotTrack&&"1"!==navigator.doNotTrack){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-4623408-2"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://ssl.google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}ServiceWorkerController.prototype={start:function(){"serviceWorker"in navigator?this.check().then(function(){return this.swReg&&(this.swReg.installing||this.swReg.waiting||this.swReg.active)?this.swReg.active?this.swReg.update():void 0:this.install()}.bind(this)).then(function(){this.swReg.addEventListener("updatefound",this),this.showUpdateProgress()}.bind(this)).catch(function(t){console.log(t)}.bind(this)):this.state="notsupported"},check:function(){return navigator.serviceWorker.getRegistration("/").then(function(t){this.swReg=t}.bind(this))},install:function(){return navigator.serviceWorker.register("/service-worker.min.js",{scope:"/"}).then(function(t){this.swReg=t}.bind(this))},remove:function(){this.state="removing",this.swReg.unregister().then(function(t){t?(this.state="uninstalled",this.swReg=null):this.state="installed"}.bind(this))},showUpdateProgress:function(){this.swReg.installing&&navigator.serviceWorker.controller&&(document.documentElement.classList.add("updating"),this.swReg.installing.addEventListener("statechange",this))},handleEvent:function(t){switch(t.type){case"updatefound":this.showUpdateProgress();break;case"statechange":if(t.target.removeEventListener("statechange",this),"redundant"===t.target.state)return void document.documentElement.classList.remove("updating");window.location.reload()}}},window.swController=new ServiceWorkerController,window.swController.start(),window.addEventListener("pagehide",function(){document.body.classList.add("pagehide")}),window.addEventListener("pageshow",function(){document.body.classList.remove("pagehide")});
//# sourceMappingURL=script.min.js.map